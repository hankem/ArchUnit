plugins {
    id 'archunit.java-conventions'
}

gradle.projectsEvaluated {
    compileTestJava.dependsOn(rootProject.getTasksByName('finishArchive', true))
}

archUnitTest {
    providesTestJar = true
}

rootProject.ext.archUnitExamplesMainDependencies = [
        libs.jodaTime,
        libs.javaxAnnotationApi,
        libs.jakartaInject,
        libs.jakartaAnnotations,
        libs.springBeans,
        libs.guice,
        libs.geronimoEjb,
        libs.geronimoJpa
]

dependencies {
    // `api` dependencies so we can access them within `archunit-integration-test`
    archUnitExamplesMainDependencies.each { api it }

    testImplementation project(path: ':archunit')
}